#!/bin/bash
# Script de formatage simple Athalia
# Formate les fichiers Python sans interfÃ©rer avec pre-commit

set -e

# Couleurs
GREEN='\033[0;32m'
BLUE='\033[0;34m'
NC='\033[0m'

echo -e "${BLUE}ðŸŽ¨ Formatage simple Athalia${NC}"

# VÃ©rifier si des fichiers Python sont modifiÃ©s
PYTHON_FILES=$(git diff --name-only | grep '\.py$' || true)

if [ -z "$PYTHON_FILES" ]; then
    echo "Aucun fichier Python modifiÃ©"
    exit 0
fi

echo "Fichiers Python Ã  formater:"
echo "$PYTHON_FILES"
echo

# Formatage avec black
echo -e "${BLUE}ðŸ“‹ Formatage avec Black...${NC}"
echo "$PYTHON_FILES" | xargs -r black --line-length=88

# Organisation des imports avec isort
echo -e "${BLUE}ðŸ“‹ Organisation des imports...${NC}"
echo "$PYTHON_FILES" | xargs -r isort --profile=black --line-length=88

# Formatage avec ruff
echo -e "${BLUE}ðŸ“‹ Formatage avec Ruff...${NC}"
echo "$PYTHON_FILES" | xargs -r ruff format --line-length=88

echo -e "${GREEN}âœ… Formatage terminÃ© !${NC}"
echo
echo "Pour committer:"
echo "  git add ."
echo "  git commit -m \"votre message\"" 